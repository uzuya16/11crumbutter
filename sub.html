<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>별점 리뷰 (초간단)</title>
<style>
  /* 레이아웃 */
  body { font-family: system-ui, -apple-system, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif; line-height: 1.5; padding: 32px; }
  .wrap { max-width: 420px; margin: 0 auto; }

  /* 별점 박스 */
  .stars {
    display: inline-flex;
    gap: 6px;
    cursor: pointer;
  }

  /* 개별 별 */
  .star {
    font-size: 36px;
    line-height: 1;
    border: 0;
    background: none;
    padding: 0;
    filter: drop-shadow(0 1px 0 rgba(0,0,0,.1));
  }

  /* 비활성(빈 별) / 활성(채운 별) */
  .star[data-filled="false"] { color: #bbb; }    /* 빈 별 */
  .star[data-filled="true"]  { color: #f5a623; } /* 채운 별(골드) */

  /* 키보드 포커스 */
  .star:focus-visible { outline: 2px solid #4c9ffe; border-radius: 4px; }

  /* 안내 텍스트 */
  .out { margin-top: 10px; font-size: 14px; color: #333; }
</style>
</head>
<body>
  <div class="wrap">
    <h1>별점 리뷰</h1>

    <!-- role/aria로 스크린리더 접근성 확보 -->
    <div class="stars" role="radiogroup" aria-label="별점 주기" id="stars">
      <!-- data-value = 몇 점인지 -->
      <!-- aria-checked = 선택됐는지(true/false) -->
      <!-- data-filled = 화면에 채워서 보일지(true/false) -->
      <button class="star" type="button" aria-label="1점" aria-checked="false" data-value="1" data-filled="false">★</button>
      <button class="star" type="button" aria-label="2점" aria-checked="false" data-value="2" data-filled="false">★</button>
      <button class="star" type="button" aria-label="3점" aria-checked="false" data-value="3" data-filled="false">★</button>
      <button class="star" type="button" aria-label="4점" aria-checked="false" data-value="4" data-filled="false">★</button>
      <button class="star" type="button" aria-label="5점" aria-checked="false" data-value="5" data-filled="false">★</button>
    </div>

    <div class="out" id="out">아직 선택하지 않았어요.</div>
  </div>

<script>
  // 핵심 아이디어(초등 버전):
  // 1) 별에 마우스를 올리면 그 별까지 "색칠"
  // 2) 별을 클릭하면 그 점수를 "저장"
  // 3) 마우스를 치우면 저장된 점수대로만 "색칠"

  const starsBox = document.getElementById('stars');
  const out = document.getElementById('out');
  const stars = Array.from(starsBox.querySelectorAll('.star'));

  // 선택된 점수(없으면 0)
  let selected = 0;

  // 화면에 n개 만큼만 채워 보여주기
  function paint(n) {
    stars.forEach((btn, i) => {
      const fill = i < n;
      btn.setAttribute('data-filled', String(fill));
    });
  }

  // 선택 상태(aria)도 같이 반영
  function reflectSelection(n) {
    stars.forEach((btn, i) => {
      const checked = (i === n - 1);
      btn.setAttribute('aria-checked', String(checked));
    });
  }

  // 마우스 오버: 임시로 채색
  starsBox.addEventListener('mouseover', (e) => {
    const btn = e.target.closest('.star');
    if (!btn) return;
    const value = Number(btn.dataset.value);
    paint(value);
  });

  // 마우스 나감: 선택값으로 복원
  starsBox.addEventListener('mouseleave', () => {
    paint(selected);
  });

  // 클릭: 선택값 확정
  starsBox.addEventListener('click', (e) => {
    const btn = e.target.closest('.star');
    if (!btn) return;
    selected = Number(btn.dataset.value);
    paint(selected);
    reflectSelection(selected);
    out.textContent = `당신의 별점: ${selected}점 / 5점`;
    // 필요하다면 여기서 서버로 보내면 됨(fetch 사용)
  });

  // 키보드로도 조작 가능(←/→, 스페이스/엔터)
  starsBox.addEventListener('keydown', (e) => {
    const focusIndex = stars.indexOf(document.activeElement);
    if (e.key === 'ArrowRight') {
      const next = Math.min(4, focusIndex + 1);
      stars[next].focus();
      paint(next + 1);
      e.preventDefault();
    } else if (e.key === 'ArrowLeft') {
      const prev = Math.max(0, focusIndex - 1);
      stars[prev].focus();
      paint(prev + 1);
      e.preventDefault();
    } else if (e.key === 'Enter' || e.key === ' ') {
      // 현재 포커스된 별로 확정
      selected = focusIndex + 1;
      paint(selected);
      reflectSelection(selected);
      out.textContent = `당신의 별점: ${selected}점 / 5점`;
      e.preventDefault();
    }
  });

  // 페이지 처음 표시(0점)
  paint(0);
</script>
</body>
</html>
